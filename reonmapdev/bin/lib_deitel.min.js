/*! deitel 20151110 */
!function(){d3.hexbin=function(){function d(a){var b={};return a.forEach(function(a,c){var e=l.call(d,a,c)/h,f=Math.round(e),i=k.call(d,a,c)/g-(1&f?.5:0),j=Math.round(i),m=e-f;if(3*Math.abs(m)>1){var n=i-j,o=j+(j>i?-1:1)/2,p=f+(f>e?-1:1),q=i-o,r=e-p;n*n+m*m>q*q+r*r&&(j=o+(1&f?1:-1)/2,f=p)}var s=j+"-"+f,t=b[s];t?t.push(a):(t=b[s]=[a],t.i=j,t.j=f,t.x=(j+(1&f?.5:0))*g,t.y=f*h)}),d3.values(b)}function e(b){var c=0,d=0;return a.map(function(a){var e=Math.sin(a)*b,f=-Math.cos(a)*b,g=e-c,h=f-d;return c=e,d=f,[g,h]})}var f,g,h,i=1,j=1,k=b,l=c;return d.x=function(a){return arguments.length?(k=a,d):k},d.y=function(a){return arguments.length?(l=a,d):l},d.hexagon=function(a){return arguments.length<1&&(a=f),"m"+e(a).join("l")+"z"},d.centers=function(){for(var a=[],b=0,c=!1,d=0;j+f>b;b+=h,c=!c,++d)for(var e=c?g/2:0,k=0;i+g/2>e;e+=g,++k){var l=[e,b];l.i=k,l.j=d,a.push(l)}return a},d.mesh=function(){var a=e(f).slice(0,4).join("l");return d.centers().map(function(b){return"M"+b+"m"+a}).join("")},d.size=function(a){return arguments.length?(i=+a[0],j=+a[1],d):[i,j]},d.radius=function(a){return arguments.length?(f=+a,g=2*f*Math.sin(Math.PI/3),h=1.5*f,d):f},d.radius(1)};var a=d3.range(0,2*Math.PI,Math.PI/3),b=function(a){return a[0]},c=function(a){return a[1]}}(),function(){"use strict";L.HexbinLayer=L.Class.extend({includes:[L.Mixin.Events],options:{radius:10,opacity:.5,duration:200,lng:function(a){return a[0]},lat:function(a){return a[1]},value:function(a){return a.length},valueFloor:void 0,valueCeil:void 0,colorRange:["#f7fbff","#08306b"],onmouseover:void 0,onmouseout:void 0,click:void 0},initialize:function(a){L.setOptions(this,a),this._hexLayout=d3.hexbin().radius(this.options.radius).x(function(a){return a.point[0]}).y(function(a){return a.point[1]}),this._data=[],this._colorScale=d3.scale.linear().range(this.options.colorRange).clamp(!0)},onAdd:function(a){this._map=a,this._container=this._initContainer(),a.on({moveend:this._redraw},this),this._redraw()},onRemove:function(a){this._destroyContainer(),a.off({moveend:this._redraw},this),this._container=null,this._map=null},addTo:function(a){return a.addLayer(this),this},_initContainer:function(){var a=null;if(null==this._container){var b=this._map.getPanes().overlayPane;a=d3.select(b).append("svg").attr("class","leaflet-layer leaflet-zoom-hide")}return a},_destroyContainer:function(){null!=this._container&&this._container.remove()},_redraw:function(){var a=this;if(a._map){var b=a._data.map(function(b){var c=a.options.lng(b),d=a.options.lat(b),e=a._project([c,d]);return{o:b,point:e}}),c=this._map.getZoom(),d=2*this.options.radius,e=this._getBounds(b),f=e.max[0]-e.min[0]+2*d,g=e.max[1]-e.min[1]+2*d,h=e.min[1]-d,i=e.min[0]-d;this._hexLayout.size([f,g]),this._container.attr("width",f).attr("height",g).style("margin-left",i+"px").style("margin-top",h+"px");var j=this._container.selectAll("g.hexbin").data([c],function(a){return a});j.enter().append("g").attr("class",function(a){return"hexbin zoom-"+a}),j.attr("transform","translate("+-i+","+-h+")"),j.exit().remove(),this._createHexagons(j,b)}},_createHexagons:function(a,b){var c=this,d=c._hexLayout(b),e=d3.extent(d,function(a){return c.options.value(a)});null==e[0]&&(e[0]=0),null==e[1]&&(e[1]=0),null!=c.options.valueFloor&&(e[0]=c.options.valueFloor),null!=c.options.valueCeil&&(e[1]=c.options.valueCeil);var f=c._linearlySpace(e[0],e[1],c._colorScale.range().length);c._colorScale.domain(f);var g=a.selectAll("path.hexbin-hexagon").data(d,function(a){return a.i+":"+a.j});g.transition().duration(c.options.duration).attr("fill",function(a){return c._colorScale(c.options.value(a))}).attr("fill-opacity",c.options.opacity).attr("stroke-opacity",c.options.opacity),g.enter().append("path").attr("class","hexbin-hexagon").attr("d",function(a){return"M"+a.x+","+a.y+c._hexLayout.hexagon()}).attr("fill",function(a){return c._colorScale(c.options.value(a))}).attr("fill-opacity",.01).attr("stroke-opacity",.01).on("mouseover",function(a,b){null!=c.options.onmouseover&&c.options.onmouseover(a,this,c)}).on("mouseout",function(a,b){null!=c.options.onmouseout&&c.options.onmouseout(a,this,c)}).on("click",function(a,b){null!=c.options.onclick&&c.options.onclick(a,this,c)}).transition().duration(c.options.duration).attr("fill-opacity",c.options.opacity).attr("stroke-opacity",c.options.opacity),g.exit().transition().duration(c.options.duration).attr("fill-opacity",.01).attr("stroke-opacity",.01).remove()},_project:function(a){var b=this._map.latLngToLayerPoint([a[1],a[0]]);return[b.x,b.y]},_getBounds:function(a){if(null==a||a.length<1)return{min:[0,0],max:[0,0]};var b=[[999,999],[-999,-999]];return a.forEach(function(a){var c=a.point[0],d=a.point[1];b[0][0]=Math.min(b[0][0],c),b[0][1]=Math.min(b[0][1],d),b[1][0]=Math.max(b[1][0],c),b[1][1]=Math.max(b[1][1],d)}),{min:b[0],max:b[1]}},_linearlySpace:function(a,b,c){for(var d=new Array(c),e=(b-a)/Math.max(c-1,1),f=0;c>f;++f)d[f]=a+f*e;return d},data:function(a){return this._data=null!=a?a:[],this._redraw(),this},colorScale:function(a){return void 0===a?this._colorScale:(this._colorScale=a,this._redraw(),this)},value:function(a){return void 0===a?this.options.value:(this.options.value=a,this._redraw(),this)},onmouseover:function(a){return this.options.onmouseover=a,this._redraw(),this},onmouseout:function(a){return this.options.onmouseout=a,this._redraw(),this},onclick:function(a){return this.options.onclick=a,this._redraw(),this}}),L.hexbinLayer=function(a){return new L.HexbinLayer(a)}}(),function(){"use strict";L.PingLayer=L.Class.extend({includes:[L.Mixin.Events],options:{lng:function(a){return a[0]},lat:function(a){return a[1]},fps:32,duration:800},_lastUpdate:Date.now(),_fps:0,_mapBounds:void 0,radiusScale:function(a){return void 0===a?this._radiusScale:(this._radiusScale=a,this)},opacityScale:function(a){return void 0===a?this._opacityScale:(this._opacityScale=a,this)},initialize:function(a){L.setOptions(this,a),this._radiusScale=d3.scale.pow().exponent(.35).domain([0,this.options.duration]).range([3,15]).clamp(!0),this._opacityScale=d3.scale.linear().domain([0,this.options.duration]).range([1,0]).clamp(!0)},onAdd:function(a){this._map=a,this._running=!1,this._container=this._initContainer(),this._updateContainer(),a.on({move:this._move},this)},onRemove:function(a){this._destroyContainer(),a.off({move:this._move},this),this._container=null,this._map=null,this._data=null},addTo:function(a){return a.addLayer(this),this},ping:function(a,b){if(this._add(a,b),this._expire(),!this._running&&this._data.length>0){this._running=!0,this._lastUpdate=Date.now();var c=this;d3.timer(function(){return c._update.apply(c)})}return this},getFps:function(){return this._fps},getCount:function(){return this._data.length},_initContainer:function(){var a=null;if(null==this._container){var b=this._map.getPanes().overlayPane;a=d3.select(b).append("svg").attr("class","leaflet-layer leaflet-zoom-hide")}return a},_updateContainer:function(){var a=this._getMapBounds();this._mapBounds=a,this._container.attr("width",a.width).attr("height",a.height).style("margin-left",a.left+"px").style("margin-top",a.top+"px")},_destroyContainer:function(){null!=this._container&&this._container.remove()},_getMapBounds:function(){var a=this._map.getBounds(),b=this._map.latLngToLayerPoint(a.getNorthEast()),c=this._map.latLngToLayerPoint(a.getSouthWest()),d={width:b.x-c.x,height:c.y-b.y,left:c.x,top:b.y};return d},_move:function(){this._updateContainer()},_add:function(a,b){null==this._data&&(this._data=[]);var c=[this.options.lat(a),this.options.lng(a)],d=this._map.latLngToLayerPoint(c),e=this._mapBounds,f={geo:c,x:d.x-e.left,y:d.y-e.top,ts:Date.now(),nts:0};f.c=this._container.append("circle").attr("class",null!=b?"ping "+b:"ping").attr("cx",f.x).attr("cy",f.y).attr("r",this.radiusScale().range()[0]),this._data.push(f)},_update:function(){var a=Date.now();null==this._data&&(this._data=[]);for(var b=-1,c=0;c<this._data.length;c++){var d=this._data[c],e=a-d.ts;this.options.duration<e?(d.c.remove(),b=c):d.nts<a&&(d.c.attr("r",this.radiusScale()(e)).attr("fill-opacity",this.opacityScale()(e)).attr("stroke-opacity",this.opacityScale()(e)),d.nts=Math.round(a+1e3/this.options.fps))}return b>-1&&this._data.splice(0,b+1),this._running=this._data.length>0,this._running&&(this._fps=1e3/(a-this._lastUpdate),this._lastUpdate=a),!this._running},_expire:function(){for(var a=-1,b=Date.now(),c=0;c<this._data.length;c++){var d=this._data[c],e=b-d.ts;if(!(this.options.duration<e))break;d.c.remove(),a=c}a>-1&&this._data.splice(0,a+1)}}),L.pingLayer=function(a){return new L.PingLayer(a)}}(),function(){function a(a){var b=a.split(/\n/);b.shift(),b.splice(-1,1);var c=b[0].length-b[0].trim().length,d=new RegExp(" {"+c+"}");return b=b.map(function(a){return a.match(d)&&(a=a.substring(c)),a}),b=b.join("\n")}$(window).scroll(function(){var a=$(document).scrollTop();$(".splash").css({"background-position":"0px -"+(a/3).toFixed(2)+"px"}),a>50?$("#home > .navbar").removeClass("navbar-transparent"):$("#home > .navbar").addClass("navbar-transparent")}),$("a[href='#']").click(function(a){a.preventDefault()});var b=$("<div id='source-button' class='btn btn-primary btn-xs'>&lt; &gt;</div>").click(function(){var b=$(this).parent().html();b=a(b),$("#source-modal pre").text(b),$("#source-modal").modal()});$('.bs-component [data-toggle="popover"]').popover(),$('.bs-component [data-toggle="tooltip"]').tooltip(),$(".bs-component").hover(function(){$(this).append(b),b.show()},function(){b.hide()})}(),function(a){var b={defaultRadius:40,defaultRenderer:"canvas2d",defaultGradient:{.25:"rgb(0,0,255)",.55:"rgb(0,255,0)",.85:"yellow",1:"rgb(255,0,0)"},defaultMaxOpacity:1,defaultMinOpacity:0,defaultBlur:.85,defaultXField:"x",defaultYField:"y",defaultValueField:"value",plugins:{}},c=function(){var a=function(a){this._coordinator={},this._data=[],this._radi=[],this._min=0,this._max=1,this._xField=a.xField||a.defaultXField,this._yField=a.yField||a.defaultYField,this._valueField=a.valueField||a.defaultValueField,a.radius&&(this._cfgRadius=a.radius)},c=b.defaultRadius;return a.prototype={_organiseData:function(a,b){var d=a[this._xField],e=a[this._yField],f=this._radi,g=this._data,h=this._max,i=this._min,j=a[this._valueField]||1,k=a.radius||this._cfgRadius||c;return g[d]||(g[d]=[],f[d]=[]),g[d][e]?g[d][e]+=j:(g[d][e]=j,f[d][e]=k),g[d][e]>h?(b?this.setDataMax(g[d][e]):this._max=g[d][e],!1):{x:d,y:e,value:j,radius:k,min:i,max:h}},_unOrganizeData:function(){var a=[],b=this._data,c=this._radi;for(var d in b)for(var e in b[d])a.push({x:d,y:e,radius:c[d][e],value:b[d][e]});return{min:this._min,max:this._max,data:a}},_onExtremaChange:function(){this._coordinator.emit("extremachange",{min:this._min,max:this._max})},addData:function(){if(arguments[0].length>0)for(var a=arguments[0],b=a.length;b--;)this.addData.call(this,a[b]);else{var c=this._organiseData(arguments[0],!0);c&&this._coordinator.emit("renderpartial",{min:this._min,max:this._max,data:[c]})}return this},setData:function(a){var b=a.data,c=b.length;this._data=[],this._radi=[];for(var d=0;c>d;d++)this._organiseData(b[d],!1);return this._max=a.max,this._min=a.min||0,this._onExtremaChange(),this._coordinator.emit("renderall",this._getInternalData()),this},removeData:function(){},setDataMax:function(a){return this._max=a,this._onExtremaChange(),this._coordinator.emit("renderall",this._getInternalData()),this},setDataMin:function(a){return this._min=a,this._onExtremaChange(),this._coordinator.emit("renderall",this._getInternalData()),this},setCoordinator:function(a){this._coordinator=a},_getInternalData:function(){return{max:this._max,min:this._min,data:this._data,radi:this._radi}},getData:function(){return this._unOrganizeData()}},a}(),d=function(){function a(a){var c=a.container,d=this.shadowCanvas=document.createElement("canvas"),e=this.canvas=a.canvas||document.createElement("canvas"),f=(this._renderBoundaries=[1e4,1e4,0,0],getComputedStyle(a.container)||{});e.className="heatmap-canvas",this._width=e.width=d.width=+f.width.replace(/px/,""),this._height=e.height=d.height=+f.height.replace(/px/,""),this.shadowCtx=d.getContext("2d"),this.ctx=e.getContext("2d"),e.style.cssText=d.style.cssText="position:absolute;left:0;top:0;",c.style.position="relative",c.appendChild(e),this._palette=b(a),this._templates={},this._setStyles(a)}var b=function(a){var b=a.gradient||a.defaultGradient,c=document.createElement("canvas"),d=c.getContext("2d");c.width=256,c.height=1;var e=d.createLinearGradient(0,0,256,1);for(var f in b)e.addColorStop(f,b[f]);return d.fillStyle=e,d.fillRect(0,0,256,1),d.getImageData(0,0,256,1).data},c=function(a,b){var c=document.createElement("canvas"),d=c.getContext("2d"),e=a,f=a;if(c.width=c.height=2*a,1==b)d.beginPath(),d.arc(e,f,a,0,2*Math.PI,!1),d.fillStyle="rgba(0,0,0,1)",d.fill();else{var g=d.createRadialGradient(e,f,a*b,e,f,a);g.addColorStop(0,"rgba(0,0,0,1)"),g.addColorStop(1,"rgba(0,0,0,0)"),d.fillStyle=g,d.fillRect(0,0,2*a,2*a)}return c},d=function(a){for(var b=[],c=a.min,d=a.max,e=a.radi,a=a.data,f=Object.keys(a),g=f.length;g--;)for(var h=f[g],i=Object.keys(a[h]),j=i.length;j--;){var k=i[j],l=a[h][k],m=e[h][k];b.push({x:h,y:k,value:l,radius:m})}return{min:c,max:d,data:b}};return a.prototype={renderPartial:function(a){this._drawAlpha(a),this._colorize()},renderAll:function(a){this._clear(),this._drawAlpha(d(a)),this._colorize()},_updateGradient:function(a){this._palette=b(a)},updateConfig:function(a){a.gradient&&this._updateGradient(a),this._setStyles(a)},setDimensions:function(a,b){this._width=a,this._height=b,this.canvas.width=this.shadowCanvas.width=a,this.canvas.height=this.shadowCanvas.height=b},_clear:function(){this.shadowCtx.clearRect(0,0,this._width,this._height),this.ctx.clearRect(0,0,this._width,this._height)},_setStyles:function(a){this._blur=0==a.blur?0:a.blur||a.defaultBlur,a.backgroundColor&&(this.canvas.style.backgroundColor=a.backgroundColor),this._opacity=255*(a.opacity||0),this._maxOpacity=255*(a.maxOpacity||a.defaultMaxOpacity),this._minOpacity=255*(a.minOpacity||a.defaultMinOpacity),this._useGradientOpacity=!!a.useGradientOpacity},_drawAlpha:function(a){for(var b=this._min=a.min,d=this._max=a.max,a=a.data||[],e=a.length,f=1-this._blur;e--;){var g,h=a[e],i=h.x,j=h.y,k=h.radius,l=Math.min(h.value,d),m=i-k,n=j-k,o=this.shadowCtx;this._templates[k]?g=this._templates[k]:this._templates[k]=g=c(k,f),o.globalAlpha=(l-b)/(d-b),o.drawImage(g,m,n),m<this._renderBoundaries[0]&&(this._renderBoundaries[0]=m),n<this._renderBoundaries[1]&&(this._renderBoundaries[1]=n),m+2*k>this._renderBoundaries[2]&&(this._renderBoundaries[2]=m+2*k),n+2*k>this._renderBoundaries[3]&&(this._renderBoundaries[3]=n+2*k)}},_colorize:function(){var a=this._renderBoundaries[0],b=this._renderBoundaries[1],c=this._renderBoundaries[2]-a,d=this._renderBoundaries[3]-b,e=this._width,f=this._height,g=this._opacity,h=this._maxOpacity,i=this._minOpacity,j=this._useGradientOpacity;0>a&&(a=0),0>b&&(b=0),a+c>e&&(c=e-a),b+d>f&&(d=f-b);for(var k=this.shadowCtx.getImageData(a,b,c,d),l=k.data,m=l.length,n=this._palette,o=3;m>o;o+=4){var p=l[o],q=4*p;if(q){var r;r=g>0?g:h>p?i>p?i:p:h,l[o-3]=n[q],l[o-2]=n[q+1],l[o-1]=n[q+2],l[o]=j?n[q+3]:r}}k.data=l,this.ctx.putImageData(k,a,b),this._renderBoundaries=[1e3,1e3,0,0]},getValueAt:function(a){var b,c=this.shadowCtx,d=c.getImageData(a.x,a.y,1,1),e=d.data[3],f=this._max,g=this._min;return b=Math.abs(f-g)*(e/255)>>0},getDataURL:function(){return this.canvas.toDataURL()}},a}(),e=function(){var a=!1;return"canvas2d"===b.defaultRenderer&&(a=d),a}(),f={merge:function(){for(var a={},b=arguments.length,c=0;b>c;c++){var d=arguments[c];for(var e in d)a[e]=d[e]}return a}},g=function(){function a(){var a=this._config=f.merge(b,arguments[0]||{});if(this._coordinator=new d,a.plugin){var h=a.plugin;if(!b.plugins[h])throw new Error("Plugin '"+h+"' not found. Maybe it was not registered.");var i=b.plugins[h];this._renderer=new i.renderer(a),this._store=new i.store(a)}else this._renderer=new e(a),this._store=new c(a);g(this)}var d=function(){function a(){this.cStore={}}return a.prototype={on:function(a,b,c){var d=this.cStore;d[a]||(d[a]=[]),d[a].push(function(a){return b.call(c,a)})},emit:function(a,b){var c=this.cStore;if(c[a])for(var d=c[a].length,e=0;d>e;e++){var f=c[a][e];f(b)}}},a}(),g=function(a){var b=a._renderer,c=a._coordinator,d=a._store;c.on("renderpartial",b.renderPartial,b),c.on("renderall",b.renderAll,b),c.on("extremachange",function(b){a._config.onExtremaChange&&a._config.onExtremaChange({min:b.min,max:b.max,gradient:a._config.gradient||a._config.defaultGradient})}),d.setCoordinator(c)};return a.prototype={addData:function(){return this._store.addData.apply(this._store,arguments),this},removeData:function(){return this._store.removeData&&this._store.removeData.apply(this._store,arguments),this},setData:function(){return this._store.setData.apply(this._store,arguments),this},setDataMax:function(){return this._store.setDataMax.apply(this._store,arguments),this},setDataMin:function(){return this._store.setDataMin.apply(this._store,arguments),this},configure:function(a){return this._config=f.merge(this._config,a),this._renderer.updateConfig(this._config),this._coordinator.emit("renderall",this._store._getInternalData()),this},repaint:function(){return this._coordinator.emit("renderall",this._store._getInternalData()),this},getData:function(){return this._store.getData()},getDataURL:function(){return this._renderer.getDataURL()},getValueAt:function(a){return this._store.getValueAt?this._store.getValueAt(a):this._renderer.getValueAt?this._renderer.getValueAt(a):null}},a}(),h={create:function(a){return new g(a)},register:function(a,c){b.plugins[a]=c}};a.h337=h}(this||window);var HeatmapOverlay=L.Class.extend({initialize:function(a){this.cfg=a,this._el=L.DomUtil.create("div","leaflet-zoom-hide"),this._data=[],this._max=1,this.cfg.container=this._el},onAdd:function(a){var b=a.getSize();this._map=a,this._width=b.x,this._height=b.y,this._el.style.width=b.x+"px",this._el.style.height=b.y+"px",this._resetOrigin(),a.getPanes().overlayPane.appendChild(this._el),this._heatmap||(this._heatmap=h337.create(this.cfg)),a.on("viewreset",this._resetOrigin,this),a.on("dragend",this._draw,this),this._draw()},onRemove:function(a){a.getPanes().overlayPane.removeChild(this._el),a.off("viewreset",this._resetOrigin,this),a.off("dragend",this._draw,this)},_draw:function(){if(this._map){var a=this._map.latLngToContainerPoint(this._origin);this._el.style[HeatmapOverlay.CSS_TRANSFORM]="translate("+-Math.round(a.x)+"px,"+-Math.round(a.y)+"px)",this._update()}},_update:function(){var a,b,c;if(a=this._map.getBounds(),b=this._map.getZoom(),c=Math.pow(2,b),0!=this._data.length){for(var d={max:this._max},e=[],f=this.cfg.scaleRadius?c:1,g=0,h=this.cfg.valueField,i=this._data.length;i--;){var j=this._data[i],k=j[h],l=j.latlng;if(a.contains(l)){k>g&&(g=k);var m=this._map.latLngToContainerPoint(l),n={x:Math.round(m.x),y:Math.round(m.y)};n[h]=k;var o;o=j.radius?j.radius*f:(this.cfg.radius||2)*f,n.radius=o,e.push(n)}}this.cfg.useLocalExtrema&&(d.max=g),d.data=e,this._heatmap.setData(d)}},setData:function(a){this._max=a.max||this._max;for(var b=this.cfg.latField||"lat",c=this.cfg.lngField||"lng",d=this.cfg.valueField||"value",a=a.data,e=a.length,f=[];e--;){var g=a[e],h=new L.LatLng(g[b],g[c]),i={latlng:h};i[d]=g[d],g.radius&&(i.radius=g.radius),f.push(i)}this._data=f,this._draw()},addData:function(a){if(a.length>0)for(var b=a.length;b--;)this.addData(a[b]);else{var c=this.cfg.latField||"lat",d=this.cfg.lngField||"lng",e=this.cfg.valueField||"value",f=a,g=new L.LatLng(f[c],f[d]),h={latlng:g};h[e]=f[e],this._max=Math.max(this._max,h[e]),f.radius&&(h.radius=f.radius),this._data.push(h),this._draw()}},_resetOrigin:function(){this._origin=this._map.layerPointToLatLng(new L.Point(0,0)),this._draw()}});HeatmapOverlay.CSS_TRANSFORM=function(){for(var a=document.createElement("div"),b=["transform","WebkitTransform","MozTransform","OTransform","msTransform"],c=0;c<b.length;c++){var d=b[c];if(void 0!==a.style[d])return d}return b[0]}(),function(){"use strict";L.TileLayer.Provider=L.TileLayer.extend({initialize:function(a,b){var c=L.TileLayer.Provider.providers,d=a.split("."),e=d[0],f=d[1];if(!c[e])throw"No such provider ("+e+")";var g={url:c[e].url,options:c[e].options};if(f&&"variants"in c[e]){if(!(f in c[e].variants))throw"No such variant of "+e+" ("+f+")";var h,i=c[e].variants[f];h="string"==typeof i?{variant:i}:i.options,g={url:i.url||g.url,options:L.Util.extend({},g.options,h)}}else"function"==typeof g.url&&(g.url=g.url(d.splice(1,d.length-1).join(".")));var j="file:"===window.location.protocol||g.options.forceHTTP;0===g.url.indexOf("//")&&j&&(g.url="http:"+g.url);var k=function(a){return-1===a.indexOf("{attribution.")?a:a.replace(/\{attribution.(\w*)\}/,function(a,b){return k(c[b].options.attribution)})};g.options.attribution=k(g.options.attribution);var l=L.Util.extend({},g.options,b);L.TileLayer.prototype.initialize.call(this,g.url,l)}}),L.TileLayer.Provider.providers={OpenStreetMap:{url:"//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",options:{maxZoom:19,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'},variants:{Mapnik:{},BlackAndWhite:{url:"http://{s}.tiles.wmflabs.org/bw-mapnik/{z}/{x}/{y}.png",options:{maxZoom:18}},DE:{url:"http://{s}.tile.openstreetmap.de/tiles/osmde/{z}/{x}/{y}.png",options:{maxZoom:18}},France:{url:"http://{s}.tile.openstreetmap.fr/osmfr/{z}/{x}/{y}.png",options:{attribution:"&copy; Openstreetmap France | {attribution.OpenStreetMap}"}},HOT:{url:"http://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png",options:{attribution:'{attribution.OpenStreetMap}, Tiles courtesy of <a href="http://hot.openstreetmap.org/" target="_blank">Humanitarian OpenStreetMap Team</a>'}}}},OpenSeaMap:{url:"http://tiles.openseamap.org/seamark/{z}/{x}/{y}.png",options:{attribution:'Map data: &copy; <a href="http://www.openseamap.org">OpenSeaMap</a> contributors'}},OpenTopoMap:{url:"//{s}.tile.opentopomap.org/{z}/{x}/{y}.png",options:{maxZoom:16,attribution:'Map data: {attribution.OpenStreetMap}, <a href="http://viewfinderpanoramas.org">SRTM</a> | Map style: &copy; <a href="https://opentopomap.org">OpenTopoMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)'}},Thunderforest:{url:"//{s}.tile.thunderforest.com/{variant}/{z}/{x}/{y}.png",options:{attribution:'&copy; <a href="http://www.opencyclemap.org">OpenCycleMap</a>, {attribution.OpenStreetMap}',variant:"cycle"},variants:{OpenCycleMap:"cycle",Transport:{options:{variant:"transport",maxZoom:19}},TransportDark:{options:{variant:"transport-dark",maxZoom:19}},Landscape:"landscape",Outdoors:"outdoors"}},OpenMapSurfer:{url:"http://openmapsurfer.uni-hd.de/tiles/{variant}/x={x}&y={y}&z={z}",options:{maxZoom:20,variant:"roads",attribution:'Imagery from <a href="http://giscience.uni-hd.de/">GIScience Research Group @ University of Heidelberg</a> &mdash; Map data {attribution.OpenStreetMap}'},variants:{Roads:"roads",AdminBounds:{options:{variant:"adminb",maxZoom:19}},Grayscale:{options:{variant:"roadsg",maxZoom:19}}}},Hydda:{url:"http://{s}.tile.openstreetmap.se/hydda/{variant}/{z}/{x}/{y}.png",options:{variant:"full",attribution:'Tiles courtesy of <a href="http://openstreetmap.se/" target="_blank">OpenStreetMap Sweden</a> &mdash; Map data {attribution.OpenStreetMap}'},variants:{Full:"full",Base:"base",RoadsAndLabels:"roads_and_labels"}},MapQuestOpen:{url:"http://otile{s}.mqcdn.com/tiles/1.0.0/{type}/{z}/{x}/{y}.{ext}",options:{type:"map",ext:"jpg",attribution:'Tiles Courtesy of <a href="http://www.mapquest.com/">MapQuest</a> &mdash; Map data {attribution.OpenStreetMap}',subdomains:"1234"},variants:{OSM:{},Aerial:{options:{type:"sat",attribution:'Tiles Courtesy of <a href="http://www.mapquest.com/">MapQuest</a> &mdash; Portions Courtesy NASA/JPL-Caltech and U.S. Depart. of Agriculture, Farm Service Agency'}},HybridOverlay:{options:{type:"hyb",ext:"png",opacity:.9}}}},MapBox:{url:function(a){return"//{s}.tiles.mapbox.com/v3/"+a+"/{z}/{x}/{y}.png"},options:{attribution:'Imagery from <a href="http://mapbox.com/about/maps/">MapBox</a> &mdash; Map data {attribution.OpenStreetMap}',subdomains:"abcd"}},Stamen:{url:"//stamen-tiles-{s}.a.ssl.fastly.net/{variant}/{z}/{x}/{y}.png",options:{attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data {attribution.OpenStreetMap}',subdomains:"abcd",minZoom:0,maxZoom:20,variant:"toner",ext:"png"},variants:{Toner:"toner",TonerBackground:"toner-background",TonerHybrid:"toner-hybrid",TonerLines:"toner-lines",TonerLabels:"toner-labels",TonerLite:"toner-lite",Watercolor:{options:{variant:"watercolor",minZoom:1,maxZoom:16}},Terrain:{options:{variant:"terrain",minZoom:4,maxZoom:18,bounds:[[22,-132],[70,-56]]}},TerrainBackground:{options:{variant:"terrain-background",minZoom:4,maxZoom:18,bounds:[[22,-132],[70,-56]]}},TopOSMRelief:{options:{variant:"toposm-color-relief",ext:"jpg",bounds:[[22,-132],[51,-56]]}},TopOSMFeatures:{options:{variant:"toposm-features",bounds:[[22,-132],[51,-56]],opacity:.9}}}},Esri:{url:"//server.arcgisonline.com/ArcGIS/rest/services/{variant}/MapServer/tile/{z}/{y}/{x}",options:{variant:"World_Street_Map",attribution:"Tiles &copy; Esri"},variants:{WorldStreetMap:{options:{attribution:"{attribution.Esri} &mdash; Source: Esri, DeLorme, NAVTEQ, USGS, Intermap, iPC, NRCAN, Esri Japan, METI, Esri China (Hong Kong), Esri (Thailand), TomTom, 2012"}},DeLorme:{options:{variant:"Specialty/DeLorme_World_Base_Map",minZoom:1,maxZoom:11,attribution:"{attribution.Esri} &mdash; Copyright: &copy;2012 DeLorme"}},WorldTopoMap:{options:{variant:"World_Topo_Map",attribution:"{attribution.Esri} &mdash; Esri, DeLorme, NAVTEQ, TomTom, Intermap, iPC, USGS, FAO, NPS, NRCAN, GeoBase, Kadaster NL, Ordnance Survey, Esri Japan, METI, Esri China (Hong Kong), and the GIS User Community"}},WorldImagery:{options:{variant:"World_Imagery",attribution:"{attribution.Esri} &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community"}},WorldTerrain:{options:{variant:"World_Terrain_Base",maxZoom:13,attribution:"{attribution.Esri} &mdash; Source: USGS, Esri, TANA, DeLorme, and NPS"}},WorldShadedRelief:{options:{variant:"World_Shaded_Relief",maxZoom:13,attribution:"{attribution.Esri} &mdash; Source: Esri"}},WorldPhysical:{options:{variant:"World_Physical_Map",maxZoom:8,attribution:"{attribution.Esri} &mdash; Source: US National Park Service"}},OceanBasemap:{options:{variant:"Ocean_Basemap",maxZoom:13,attribution:"{attribution.Esri} &mdash; Sources: GEBCO, NOAA, CHS, OSU, UNH, CSUMB, National Geographic, DeLorme, NAVTEQ, and Esri"}},NatGeoWorldMap:{options:{variant:"NatGeo_World_Map",maxZoom:16,attribution:"{attribution.Esri} &mdash; National Geographic, Esri, DeLorme, NAVTEQ, UNEP-WCMC, USGS, NASA, ESA, METI, NRCAN, GEBCO, NOAA, iPC"}},WorldGrayCanvas:{options:{variant:"Canvas/World_Light_Gray_Base",maxZoom:16,attribution:"{attribution.Esri} &mdash; Esri, DeLorme, NAVTEQ"}}}},OpenWeatherMap:{url:"http://{s}.tile.openweathermap.org/map/{variant}/{z}/{x}/{y}.png",options:{maxZoom:19,attribution:'Map data &copy; <a href="http://openweathermap.org">OpenWeatherMap</a>',opacity:.5},variants:{Clouds:"clouds",CloudsClassic:"clouds_cls",Precipitation:"precipitation",PrecipitationClassic:"precipitation_cls",Rain:"rain",RainClassic:"rain_cls",Pressure:"pressure",PressureContour:"pressure_cntr",Wind:"wind",Temperature:"temp",Snow:"snow"}},HERE:{url:"//{s}.{base}.maps.cit.api.here.com/maptile/2.1/maptile/{mapID}/{variant}/{z}/{x}/{y}/256/png8?app_id={app_id}&app_code={app_code}",options:{attribution:'Map &copy; 1987-2014 <a href="http://developer.here.com">HERE</a>',subdomains:"1234",mapID:"newest",app_id:"<insert your app_id here>",app_code:"<insert your app_code here>",base:"base",variant:"normal.day",maxZoom:20},variants:{normalDay:"normal.day",normalDayCustom:"normal.day.custom",normalDayGrey:"normal.day.grey",normalDayMobile:"normal.day.mobile",normalDayGreyMobile:"normal.day.grey.mobile",normalDayTransit:"normal.day.transit",normalDayTransitMobile:"normal.day.transit.mobile",normalNight:"normal.night",normalNightMobile:"normal.night.mobile",normalNightGrey:"normal.night.grey",normalNightGreyMobile:"normal.night.grey.mobile",carnavDayGrey:"carnav.day.grey",hybridDay:{options:{base:"aerial",variant:"hybrid.day"}},hybridDayMobile:{options:{base:"aerial",variant:"hybrid.day.mobile"}},pedestrianDay:"pedestrian.day",pedestrianNight:"pedestrian.night",satelliteDay:{options:{base:"aerial",variant:"satellite.day"}},terrainDay:{options:{base:"aerial",variant:"terrain.day"}},terrainDayMobile:{options:{base:"aerial",variant:"terrain.day.mobile"}}}},Acetate:{url:"http://a{s}.acetate.geoiq.com/tiles/{variant}/{z}/{x}/{y}.png",options:{attribution:"&copy;2012 Esri & Stamen, Data from OSM and Natural Earth",subdomains:"0123",minZoom:2,maxZoom:18,variant:"acetate-base"},variants:{basemap:"acetate-base",terrain:"terrain",all:"acetate-hillshading",foreground:"acetate-fg",roads:"acetate-roads",labels:"acetate-labels",hillshading:"hillshading"}},FreeMapSK:{url:"http://{s}.freemap.sk/T/{z}/{x}/{y}.jpeg",options:{minZoom:8,maxZoom:16,subdomains:["t1","t2","t3","t4"],attribution:'{attribution.OpenStreetMap}, vizualization CC-By-SA 2.0 <a href="http://freemap.sk">Freemap.sk</a>'}},MtbMap:{url:"http://tile.mtbmap.cz/mtbmap_tiles/{z}/{x}/{y}.png",options:{attribution:"{attribution.OpenStreetMap} &amp; USGS"}},CartoDB:{url:"http://{s}.basemaps.cartocdn.com/{variant}/{z}/{x}/{y}.png",options:{attribution:'{attribution.OpenStreetMap} &copy; <a href="http://cartodb.com/attributions">CartoDB</a>',subdomains:"abcd",maxZoom:19,variant:"light_all"},variants:{Positron:"light_all",PositronNoLabels:"light_nolabels",DarkMatter:"dark_all",DarkMatterNoLabels:"dark_nolabels"}},HikeBike:{url:"http://{s}.tiles.wmflabs.org/{variant}/{z}/{x}/{y}.png",options:{maxZoom:19,attribution:"{attribution.OpenStreetMap}",variant:"hikebike"},variants:{HikeBike:{},HillShading:{options:{maxZoom:15,variant:"hillshading"}}}},BasemapAT:{url:"//maps{s}.wien.gv.at/basemap/{variant}/normal/google3857/{z}/{y}/{x}.{format}",options:{maxZoom:19,attribution:'Datenquelle: <a href="www.basemap.at">basemap.at</a>',subdomains:["","1","2","3","4"],format:"png",bounds:[[46.35877,8.782379],[49.037872,17.189532]],variant:"geolandbasemap"},variants:{basemap:"geolandbasemap",grau:"bmapgrau",overlay:"bmapoverlay",highdpi:{options:{variant:"bmaphidpi",format:"jpeg"}},orthofoto:{options:{variant:"bmaporthofoto30cm",format:"jpeg"}}}},NASAGIBS:{url:"//map1.vis.earthdata.nasa.gov/wmts-webmerc/{variant}/default/{time}/{tilematrixset}{maxZoom}/{z}/{y}/{x}.{format}",options:{attribution:'Imagery provided by services from the Global Imagery Browse Services (GIBS), operated by the NASA/GSFC/Earth Science Data and Information System (<a href="https://earthdata.nasa.gov">ESDIS</a>) with funding provided by NASA/HQ.',bounds:[[-85.0511287776,-179.999999975],[85.0511287776,179.999999975]],minZoom:1,maxZoom:9,format:"jpg",time:"",tilematrixset:"GoogleMapsCompatible_Level"},variants:{ModisTerraTrueColorCR:"MODIS_Terra_CorrectedReflectance_TrueColor",ModisTerraBands367CR:"MODIS_Terra_CorrectedReflectance_Bands367",ViirsEarthAtNight2012:{options:{variant:"VIIRS_CityLights_2012",maxZoom:8}},ModisTerraLSTDay:{options:{variant:"MODIS_Terra_Land_Surface_Temp_Day",format:"png",maxZoom:7,opacity:.75}},ModisTerraSnowCover:{options:{variant:"MODIS_Terra_Snow_Cover",format:"png",maxZoom:8,opacity:.75}},ModisTerraAOD:{options:{variant:"MODIS_Terra_Aerosol",format:"png",maxZoom:6,opacity:.75}},ModisTerraChlorophyll:{options:{variant:"MODIS_Terra_Chlorophyll_A",format:"png",maxZoom:7,opacity:.75}}}}},L.tileLayer.provider=function(a,b){return new L.TileLayer.Provider(a,b)}}(),function(a,b,c){var d=a.L;d.labelVersion="0.2.2-dev",d.Label=(d.Layer?d.Layer:d.Class).extend({includes:d.Mixin.Events,options:{className:"",
clickable:!1,direction:"right",noHide:!1,offset:[12,-15],opacity:1,zoomAnimation:!0},initialize:function(a,b){d.setOptions(this,a),this._source=b,this._animated=d.Browser.any3d&&this.options.zoomAnimation,this._isOpen=!1},onAdd:function(a){this._map=a,this._pane=this.options.pane?a._panes[this.options.pane]:this._source instanceof d.Marker?a._panes.markerPane:a._panes.popupPane,this._container||this._initLayout(),this._pane.appendChild(this._container),this._initInteraction(),this._update(),this.setOpacity(this.options.opacity),a.on("moveend",this._onMoveEnd,this).on("viewreset",this._onViewReset,this),this._animated&&a.on("zoomanim",this._zoomAnimation,this),d.Browser.touch&&!this.options.noHide&&(d.DomEvent.on(this._container,"click",this.close,this),a.on("click",this.close,this))},onRemove:function(a){this._pane.removeChild(this._container),a.off({zoomanim:this._zoomAnimation,moveend:this._onMoveEnd,viewreset:this._onViewReset},this),this._removeInteraction(),this._map=null},setLatLng:function(a){return this._latlng=d.latLng(a),this._map&&this._updatePosition(),this},setContent:function(a){return this._previousContent=this._content,this._content=a,this._updateContent(),this},close:function(){var a=this._map;a&&(d.Browser.touch&&!this.options.noHide&&(d.DomEvent.off(this._container,"click",this.close),a.off("click",this.close,this)),a.removeLayer(this))},updateZIndex:function(a){this._zIndex=a,this._container&&this._zIndex&&(this._container.style.zIndex=a)},setOpacity:function(a){this.options.opacity=a,this._container&&d.DomUtil.setOpacity(this._container,a)},_initLayout:function(){this._container=d.DomUtil.create("div","leaflet-label "+this.options.className+" leaflet-zoom-animated"),this.updateZIndex(this._zIndex)},_update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updatePosition(),this._container.style.visibility="")},_updateContent:function(){this._content&&this._map&&this._prevContent!==this._content&&"string"==typeof this._content&&(this._container.innerHTML=this._content,this._prevContent=this._content,this._labelWidth=this._container.offsetWidth)},_updatePosition:function(){var a=this._map.latLngToLayerPoint(this._latlng);this._setPosition(a)},_setPosition:function(a){var b=this._map,c=this._container,e=b.latLngToContainerPoint(b.getCenter()),f=b.layerPointToContainerPoint(a),g=this.options.direction,h=this._labelWidth,i=d.point(this.options.offset);"right"===g||"auto"===g&&f.x<e.x?(d.DomUtil.addClass(c,"leaflet-label-right"),d.DomUtil.removeClass(c,"leaflet-label-left"),a=a.add(i)):(d.DomUtil.addClass(c,"leaflet-label-left"),d.DomUtil.removeClass(c,"leaflet-label-right"),a=a.add(d.point(-i.x-h,i.y))),d.DomUtil.setPosition(c,a)},_zoomAnimation:function(a){var b=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center).round();this._setPosition(b)},_onMoveEnd:function(){this._animated&&"auto"!==this.options.direction||this._updatePosition()},_onViewReset:function(a){a&&a.hard&&this._update()},_initInteraction:function(){if(this.options.clickable){var a=this._container,b=["dblclick","mousedown","mouseover","mouseout","contextmenu"];d.DomUtil.addClass(a,"leaflet-clickable"),d.DomEvent.on(a,"click",this._onMouseClick,this);for(var c=0;c<b.length;c++)d.DomEvent.on(a,b[c],this._fireMouseEvent,this)}},_removeInteraction:function(){if(this.options.clickable){var a=this._container,b=["dblclick","mousedown","mouseover","mouseout","contextmenu"];d.DomUtil.removeClass(a,"leaflet-clickable"),d.DomEvent.off(a,"click",this._onMouseClick,this);for(var c=0;c<b.length;c++)d.DomEvent.off(a,b[c],this._fireMouseEvent,this)}},_onMouseClick:function(a){this.hasEventListeners(a.type)&&d.DomEvent.stopPropagation(a),this.fire(a.type,{originalEvent:a})},_fireMouseEvent:function(a){this.fire(a.type,{originalEvent:a}),"contextmenu"===a.type&&this.hasEventListeners(a.type)&&d.DomEvent.preventDefault(a),"mousedown"!==a.type?d.DomEvent.stopPropagation(a):d.DomEvent.preventDefault(a)}}),d.BaseMarkerMethods={showLabel:function(){return this.label&&this._map&&(this.label.setLatLng(this._latlng),this._map.showLabel(this.label)),this},hideLabel:function(){return this.label&&this.label.close(),this},setLabelNoHide:function(a){this._labelNoHide!==a&&(this._labelNoHide=a,a?(this._removeLabelRevealHandlers(),this.showLabel()):(this._addLabelRevealHandlers(),this.hideLabel()))},bindLabel:function(a,b){var c=this.options.icon?this.options.icon.options.labelAnchor:this.options.labelAnchor,e=d.point(c)||d.point(0,0);return e=e.add(d.Label.prototype.options.offset),b&&b.offset&&(e=e.add(b.offset)),b=d.Util.extend({offset:e},b),this._labelNoHide=b.noHide,this.label||(this._labelNoHide||this._addLabelRevealHandlers(),this.on("remove",this.hideLabel,this).on("move",this._moveLabel,this).on("add",this._onMarkerAdd,this),this._hasLabelHandlers=!0),this.label=new d.Label(b,this).setContent(a),this},unbindLabel:function(){return this.label&&(this.hideLabel(),this.label=null,this._hasLabelHandlers&&(this._labelNoHide||this._removeLabelRevealHandlers(),this.off("remove",this.hideLabel,this).off("move",this._moveLabel,this).off("add",this._onMarkerAdd,this)),this._hasLabelHandlers=!1),this},updateLabelContent:function(a){this.label&&this.label.setContent(a)},getLabel:function(){return this.label},_onMarkerAdd:function(){this._labelNoHide&&this.showLabel()},_addLabelRevealHandlers:function(){this.on("mouseover",this.showLabel,this).on("mouseout",this.hideLabel,this),d.Browser.touch&&this.on("click",this.showLabel,this)},_removeLabelRevealHandlers:function(){this.off("mouseover",this.showLabel,this).off("mouseout",this.hideLabel,this),d.Browser.touch&&this.off("click",this.showLabel,this)},_moveLabel:function(a){this.label.setLatLng(a.latlng)}},d.Icon.Default.mergeOptions({labelAnchor:new d.Point(9,-20)}),d.Marker.mergeOptions({icon:new d.Icon.Default}),d.Marker.include(d.BaseMarkerMethods),d.Marker.include({_originalUpdateZIndex:d.Marker.prototype._updateZIndex,_updateZIndex:function(a){var b=this._zIndex+a;this._originalUpdateZIndex(a),this.label&&this.label.updateZIndex(b)},_originalSetOpacity:d.Marker.prototype.setOpacity,setOpacity:function(a,b){this.options.labelHasSemiTransparency=b,this._originalSetOpacity(a)},_originalUpdateOpacity:d.Marker.prototype._updateOpacity,_updateOpacity:function(){var a=0===this.options.opacity?0:1;this._originalUpdateOpacity(),this.label&&this.label.setOpacity(this.options.labelHasSemiTransparency?this.options.opacity:a)},_originalSetLatLng:d.Marker.prototype.setLatLng,setLatLng:function(a){return this.label&&!this._labelNoHide&&this.hideLabel(),this._originalSetLatLng(a)}}),d.CircleMarker.mergeOptions({labelAnchor:new d.Point(0,0)}),d.CircleMarker.include(d.BaseMarkerMethods),d.Path.include({bindLabel:function(a,b){return this.label&&this.label.options===b||(this.label=new d.Label(b,this)),this.label.setContent(a),this._showLabelAdded||(this.on("mouseover",this._showLabel,this).on("mousemove",this._moveLabel,this).on("mouseout remove",this._hideLabel,this),d.Browser.touch&&this.on("click",this._showLabel,this),this._showLabelAdded=!0),this},unbindLabel:function(){return this.label&&(this._hideLabel(),this.label=null,this._showLabelAdded=!1,this.off("mouseover",this._showLabel,this).off("mousemove",this._moveLabel,this).off("mouseout remove",this._hideLabel,this)),this},updateLabelContent:function(a){this.label&&this.label.setContent(a)},_showLabel:function(a){this.label.setLatLng(a.latlng),this._map.showLabel(this.label)},_moveLabel:function(a){this.label.setLatLng(a.latlng)},_hideLabel:function(){this.label.close()}}),d.Map.include({showLabel:function(a){return this.addLayer(a)}}),d.FeatureGroup.include({clearLayers:function(){return this.unbindLabel(),this.eachLayer(this.removeLayer,this),this},bindLabel:function(a,b){return this.invoke("bindLabel",a,b)},unbindLabel:function(){return this.invoke("unbindLabel")},updateLabelContent:function(a){this.invoke("updateLabelContent",a)}})}(window,document),L.Icon.Label=L.Icon.extend({options:{labelClassName:""},initialize:function(a){L.Util.setOptions(this,a),L.Icon.prototype.initialize.call(this,this.options)},setLabelAsHidden:function(){this._labelHidden=!0},createIcon:function(){return this._createLabel(L.Icon.prototype.createIcon.call(this))},createShadow:function(){if(!this.options.shadowUrl)return null;var a=L.Icon.prototype.createShadow.call(this);return a&&(a.style.marginLeft=-this.options.wrapperAnchor.x+"px",a.style.marginTop=-this.options.wrapperAnchor.y+"px"),a},updateLabel:function(a,b){"DIV"===a.nodeName.toUpperCase()&&(a.childNodes[1].innerHTML=b,this.options.labelText=b)},showLabel:function(a){this._labelTextIsSet()&&(a.childNodes[1].style.display="block")},hideLabel:function(a){this._labelTextIsSet()&&(a.childNodes[1].style.display="none")},_createLabel:function(a){if(!this._labelTextIsSet())return a;var b=document.createElement("div"),c=document.createElement("span");return b.style.marginLeft=-this.options.wrapperAnchor.x+"px",b.style.marginTop=-this.options.wrapperAnchor.y+"px",b.className="leaflet-marker-icon-wrapper leaflet-zoom-animated",c.className="leaflet-marker-iconlabel "+this.options.labelClassName,c.innerHTML=this.options.labelText,c.style.marginLeft=this.options.labelAnchor.x+"px",c.style.marginTop=this.options.labelAnchor.y+"px",this._labelHidden&&(c.style.display="none",a.style.cursor="pointer"),a.style.marginLeft=this.options.iconAnchor.x+"px",a.style.marginTop=this.options.iconAnchor.y+"px",b.appendChild(a),b.appendChild(c),b},_labelTextIsSet:function(){return"undefined"!=typeof this.options.labelText&&null!==this.options.labelText}}),L.Icon.Label.Default=L.Icon.Label.extend({options:{labelAnchor:new L.Point(29,8),wrapperAnchor:new L.Point(13,41),iconAnchor:new L.Point(0,0),labelText:null,iconUrl:L.Icon.Default.imagePath+"/marker-icon.png",iconSize:new L.Point(25,41),popupAnchor:new L.Point(0,-33),shadowUrl:L.Icon.Default.imagePath+"/marker-shadow.png",shadowSize:new L.Point(41,41)}}),L.Marker.Label=L.Marker.extend({updateLabel:function(a){this.options.icon.updateLabel(this._icon,a)},_initIcon:function(){if(!(this.options.icon instanceof L.Icon.Label))throw new Error("Icon must be an instance of L.Icon.Label.");this.options.revealing&&this.options.icon.setLabelAsHidden(),L.Marker.prototype._initIcon.call(this)},_removeIcon:function(){this.options.revealing&&L.DomEvent.off(this._icon,"mouseover",this._showLabel).off(this._icon,"mouseout",this._hideLabel),L.Marker.prototype._removeIcon.call(this)},_initInteraction:function(){L.Marker.prototype._initInteraction.call(this),this.options.revealing&&L.DomEvent.on(this._icon,"mouseover",this._showLabel,this).on(this._icon,"mouseout",this._hideLabel,this)},_showLabel:function(){this.options.icon.showLabel(this._icon)},_hideLabel:function(){this.options.icon.hideLabel(this._icon)}}),function(){"use strict";angular.module("nvd3",[]).directive("nvd3",["nvd3Utils",function(a){return{restrict:"AE",scope:{data:"=",options:"=",api:"=?",events:"=?",config:"=?"},link:function(b,c,d){function e(a,c,d){a&&c&&angular.forEach(a,function(g,h){"_"===h[0]||("dispatch"===h?((void 0===c[h]||null===c[h])&&b._config.extended&&(c[h]={}),f(g,c[h])):"tooltip"===h?((void 0===c[h]||null===c[h])&&b._config.extended&&(c[h]={}),e(a[h],c[h],d)):"contentGenerator"===h?c[h]&&a[h](c[h]):-1===["axis","clearHighlights","defined","highlightPoint","nvPointerEventsClass","options","rangeBand","rangeBands","scatter","open","close"].indexOf(h)&&(void 0===c[h]||null===c[h]?b._config.extended&&(c[h]=g()):a[h](c[h])))})}function f(a,c){a&&c&&angular.forEach(a,function(d,e){void 0===c[e]||null===c[e]?b._config.extended&&(c[e]=d.on):a.on(e+"._",c[e])})}function g(d){var e=a.deepExtend(i(d),b.options[d]||{});b._config.extended&&(b.options[d]=e);var f=angular.element("<div></div>").html(e.html||"").addClass(d).addClass(e.className).removeAttr("style").css(e.css);e.html||f.text(e.text),e.enable&&("title"===d?c.prepend(f):"subtitle"===d?angular.element(c[0].querySelector(".title")).after(f):"caption"===d&&c.append(f))}function h(){var d=a.deepExtend(j(),b.options.styles||{});b._config.extended&&(b.options.styles=d),angular.forEach(d.classes,function(a,b){a?c.addClass(b):c.removeClass(b)}),c.removeAttr("style").css(d.css)}function i(a){switch(a){case"title":return{enable:!1,text:"Write Your Title",className:"h4",css:{width:b.options.chart.width+"px",textAlign:"center"}};case"subtitle":return{enable:!1,text:"Write Your Subtitle",css:{width:b.options.chart.width+"px",textAlign:"center"}};case"caption":return{enable:!1,text:"Figure 1. Write Your Caption text.",css:{width:b.options.chart.width+"px",textAlign:"center"}}}}function j(){return{classes:{"with-3d-shadow":!0,"with-transitions":!0,gallery:!1},css:{}}}var k={extended:!1,visible:!0,disabled:!1,autorefresh:!0,refreshDataOnly:!0,deepWatchOptions:!0,deepWatchData:!1,deepWatchConfig:!0,debounce:10};b._config=angular.extend(k,b.config),b.api={refresh:function(){b.api.updateWithOptions(b.options)},update:function(){b.chart&&b.chart.update()},updateWithOptions:function(c){b.api.clearElement(),angular.isDefined(c)!==!1&&b._config.visible&&(b.chart=nv.models[c.chart.type](),b.chart.id=Math.random().toString(36).substr(2,15),angular.forEach(b.chart,function(a,d){"_"===d[0]||["clearHighlights","highlightPoint","id","options","resizeHandler","state","open","close","tooltipContent"].indexOf(d)>=0||("dispatch"===d?((void 0===c.chart[d]||null===c.chart[d])&&b._config.extended&&(c.chart[d]={}),f(b.chart[d],c.chart[d])):["bars","bars1","bars2","boxplot","bullet","controls","discretebar","distX","distY","interactiveLayer","legend","lines","lines1","lines2","multibar","pie","scatter","sparkline","stack1","stack2","sunburst","tooltip","x2Axis","xAxis","y1Axis","y2Axis","y3Axis","y4Axis","yAxis","yAxis1","yAxis2"].indexOf(d)>=0||"stacked"===d&&"stackedAreaChart"===c.chart.type?((void 0===c.chart[d]||null===c.chart[d])&&b._config.extended&&(c.chart[d]={}),e(b.chart[d],c.chart[d],c.chart.type)):("xTickFormat"!==d&&"yTickFormat"!==d||"lineWithFocusChart"!==c.chart.type)&&("tooltips"===d&&"boxPlotChart"===c.chart.type||("tooltipXContent"!==d&&"tooltipYContent"!==d||"scatterChart"!==c.chart.type)&&(void 0===c.chart[d]||null===c.chart[d]?b._config.extended&&(c.chart[d]=a()):b.chart[d](c.chart[d]))))}),"sunburstChart"===c.chart.type?b.api.updateWithData(angular.copy(b.data)):b.api.updateWithData(b.data),(c.title||b._config.extended)&&g("title"),(c.subtitle||b._config.extended)&&g("subtitle"),(c.caption||b._config.extended)&&g("caption"),(c.styles||b._config.extended)&&h(),nv.addGraph(function(){return b.chart?(b.chart.resizeHandler&&b.chart.resizeHandler.clear(),b.chart.resizeHandler=nv.utils.windowResize(function(){b.chart&&b.chart.update&&b.chart.update()}),void 0!==c.chart.zoom&&["scatterChart","lineChart","candlestickBarChart","cumulativeLineChart","historicalBarChart","ohlcBarChart","stackedAreaChart"].indexOf(c.chart.type)>-1&&a.zoom(b,c),b.chart):void 0},c.chart.callback))},updateWithData:function(a){if(a){d3.select(c[0]).select("svg").remove();var d,e;b.svg=d3.select(c[0]).append("svg"),(d=b.options.chart.height)&&(isNaN(+d)||(d+="px"),b.svg.attr("height",d).style({height:d})),(e=b.options.chart.width)?(isNaN(+e)||(e+="px"),b.svg.attr("width",e).style({width:e})):b.svg.attr("width","100%").style({width:"100%"}),b.svg.datum(a).call(b.chart)}},clearElement:function(){if(c.find(".title").remove(),c.find(".subtitle").remove(),c.find(".caption").remove(),c.empty(),b.chart&&b.chart.tooltip&&b.chart.tooltip.id&&d3.select("#"+b.chart.tooltip.id()).remove(),nv.graphs&&b.chart)for(var a=nv.graphs.length-1;a>=0;a--)nv.graphs[a]&&nv.graphs[a].id===b.chart.id&&nv.graphs.splice(a,1);nv.tooltip&&nv.tooltip.cleanup&&nv.tooltip.cleanup(),b.chart&&b.chart.resizeHandler&&b.chart.resizeHandler.clear(),b.chart=null},getScope:function(){return b}},b.$watch("options | json",a.debounce(function(a){!b._config.disabled&&b._config.autorefresh&&b.api.refresh()},b._config.debounce,!0),b._config.deepWatchOptions),b.$watch("data | json",function(a,c){a!==c&&b.chart&&!b._config.disabled&&b._config.autorefresh&&(b._config.refreshDataOnly&&b.chart.update?b.chart.update():b.api.refresh())},b._config.deepWatchData),b.$watch("config",function(a,c){a!==c&&(b._config=angular.extend(k,a),b.api.refresh())},b._config.deepWatchConfig),angular.forEach(b.events,function(a,c){b.$on(c,function(c){return a(c,b)})}),c.on("$destroy",function(){b.api.clearElement()})}}}]).factory("nvd3Utils",function(){return{debounce:function(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}},deepExtend:function(a){var b=this;return angular.forEach(arguments,function(c){c!==a&&angular.forEach(c,function(c,d){a[d]&&a[d].constructor&&a[d].constructor===Object?b.deepExtend(a[d],c):a[d]=c})}),a},zoom:function(a,b){var c=b.chart.zoom,d="undefined"==typeof c.enabled||null===c.enabled?!0:c.enabled;if(d){var e,f,g,h,i=a.chart.xAxis.scale(),j=a.chart.yAxis.scale(),k=a.chart.xDomain||i.domain,l=a.chart.yDomain||j.domain,m=i.domain().slice(),n=j.domain().slice(),o=c.scale||1,p=c.translate||[0,0],q=c.scaleExtent||[1,10],r=c.useFixedDomain||!1,s=c.useNiceScale||!1,t=c.horizontalOff||!1,u=c.verticalOff||!1,v=c.unzoomEventType||"dblclick.zoom";s&&(i.nice(),j.nice()),e=function(a,b){return a[0]=Math.min(Math.max(a[0],b[0]),b[1]-b[1]/q[1]),a[1]=Math.max(b[0]+b[1]/q[1],Math.min(a[1],b[1])),a},g=function(){if(void 0!==c.zoomed){var b=c.zoomed(i.domain(),j.domain());t||k([b.x1,b.x2]),u||l([b.y1,b.y2])}else t||k(r?e(i.domain(),m):i.domain()),u||l(r?e(j.domain(),n):j.domain());a.chart.update()},h=function(){if(void 0!==c.unzoomed){var b=c.unzoomed(i.domain(),j.domain());t||k([b.x1,b.x2]),u||l([b.y1,b.y2])}else t||k(m),u||l(n);f.scale(o).translate(p),a.chart.update()},f=d3.behavior.zoom().x(i).y(j).scaleExtent(q).on("zoom",g),a.svg.call(f),f.scale(o).translate(p).event(a.svg),"none"!==v&&a.svg.on(v,h)}}}})}();